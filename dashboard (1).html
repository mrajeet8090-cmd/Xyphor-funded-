<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Xyphor Funded ‚Äî Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;900&family=Syne:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #05050f;
    --bg2: #0b0b1e;
    --card: #0f0f25;
    --border: rgba(120,80,255,0.18);
    --accent: #7c3aed;
    --accent2: #a855f7;
    --lime: #c8ff00;
    --text: #e8e0ff;
    --muted: #8878aa;
    --green: #22c55e;
    --red: #ef4444;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Syne', sans-serif;
    min-height: 100vh;
  }
  body::before {
    content:'';
    position:fixed; inset:0;
    background-image:
      linear-gradient(rgba(124,58,237,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(124,58,237,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events:none; z-index:0;
  }

  /* SIDEBAR */
  .sidebar {
    position: fixed; left:0; top:0; bottom:0;
    width: 220px;
    background: var(--card);
    border-right: 1px solid var(--border);
    display: flex; flex-direction: column;
    z-index: 100; padding: 24px 0;
  }
  .sidebar-logo {
    font-family:'Orbitron',sans-serif;
    font-size:16px; font-weight:900;
    letter-spacing:2px;
    background: linear-gradient(135deg, #a855f7, #c8ff00);
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    padding: 0 20px 24px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 16px;
  }
  .nav-item {
    display:flex; align-items:center; gap:12px;
    padding: 12px 20px; cursor:pointer;
    color:var(--muted); font-size:13px; font-weight:600;
    letter-spacing:0.5px; transition: all 0.2s;
    border-left: 3px solid transparent;
  }
  .nav-item:hover, .nav-item.active {
    color:var(--text);
    background: rgba(124,58,237,0.08);
    border-left-color: var(--accent2);
  }
  .nav-item span { font-size:16px; }
  .sidebar-bottom {
    margin-top:auto; padding: 16px 20px;
    border-top: 1px solid var(--border);
  }
  .user-info { display:flex; align-items:center; gap:10px; }
  .user-avatar {
    width:36px; height:36px; border-radius:50%;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    display:flex; align-items:center; justify-content:center;
    font-weight:700; font-size:14px;
  }
  .user-name { font-size:12px; font-weight:700; }
  .user-email { font-size:10px; color:var(--muted); }
  .logout-btn {
    width:100%; margin-top:12px; padding:8px;
    background:transparent; border:1px solid var(--border);
    border-radius:8px; color:var(--muted);
    font-family:'Syne',sans-serif; font-size:12px;
    cursor:pointer; transition:all 0.2s;
  }
  .logout-btn:hover { border-color:#ef4444; color:#ef4444; }

  /* MAIN CONTENT */
  .main {
    margin-left: 220px;
    padding: 28px;
    position:relative; z-index:1;
    min-height:100vh;
  }

  /* TOP BAR */
  .topbar {
    display:flex; align-items:center; justify-content:space-between;
    margin-bottom:28px;
  }
  .page-title {
    font-family:'Orbitron',sans-serif;
    font-size:20px; font-weight:700;
  }
  .topbar-right { display:flex; align-items:center; gap:12px; }
  .badge-live {
    background: rgba(34,197,94,0.15);
    border: 1px solid rgba(34,197,94,0.3);
    color:var(--green); font-size:11px; font-weight:700;
    padding:4px 12px; border-radius:20px; letter-spacing:1px;
  }
  .payout-btn {
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color:#fff; border:none; padding:10px 20px;
    border-radius:8px; font-family:'Syne',sans-serif;
    font-weight:700; font-size:13px; cursor:pointer;
    transition:all 0.2s;
  }
  .payout-btn:hover { transform:translateY(-1px); box-shadow:0 0 20px rgba(124,58,237,0.4); }

  /* STATS GRID */
  .stats-grid {
    display:grid; grid-template-columns:repeat(auto-fit, minmax(180px, 1fr));
    gap:16px; margin-bottom:24px;
  }
  .stat-card {
    background:var(--card);
    border:1px solid var(--border);
    border-radius:14px; padding:20px;
    transition:border-color 0.2s;
  }
  .stat-card:hover { border-color: rgba(124,58,237,0.4); }
  .stat-label { font-size:11px; color:var(--muted); letter-spacing:1px; text-transform:uppercase; margin-bottom:8px; }
  .stat-value {
    font-family:'Orbitron',sans-serif;
    font-size:24px; font-weight:700;
  }
  .stat-value.green { color:var(--green); }
  .stat-value.red { color:var(--red); }
  .stat-value.lime { color:var(--lime); }
  .stat-value.purple { color:var(--accent2); }
  .stat-change { font-size:11px; margin-top:4px; }
  .stat-change.up { color:var(--green); }
  .stat-change.down { color:var(--red); }

  /* PROGRESS SECTION */
  .section-title {
    font-family:'Orbitron',sans-serif;
    font-size:14px; font-weight:700;
    letter-spacing:1px; margin-bottom:16px;
    color:var(--text);
  }
  .grid-2 { display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-bottom:24px; }
  .card {
    background:var(--card);
    border:1px solid var(--border);
    border-radius:14px; padding:20px;
  }

  /* PROGRESS BARS */
  .progress-item { margin-bottom:16px; }
  .progress-item:last-child { margin-bottom:0; }
  .progress-header {
    display:flex; justify-content:space-between;
    font-size:12px; margin-bottom:8px;
  }
  .progress-label { color:var(--muted); font-weight:600; }
  .progress-val { font-weight:700; }
  .progress-val.green { color:var(--green); }
  .progress-val.red { color:var(--red); }
  .progress-val.lime { color:var(--lime); }
  .progress-bar {
    height:6px; background:rgba(255,255,255,0.06);
    border-radius:10px; overflow:hidden;
  }
  .progress-fill {
    height:100%; border-radius:10px;
    transition:width 1s ease;
  }
  .fill-green { background: var(--green); }
  .fill-red { background: var(--red); }
  .fill-lime { background: var(--lime); }
  .fill-purple { background: linear-gradient(90deg, var(--accent), var(--accent2)); }

  /* RULES TABLE */
  .rules-table { width:100%; }
  .rule-row {
    display:flex; align-items:center; justify-content:space-between;
    padding:12px 0;
    border-bottom:1px solid rgba(120,80,255,0.08);
    font-size:13px;
  }
  .rule-row:last-child { border-bottom:none; }
  .rule-name { color:var(--muted); }
  .rule-status {
    display:flex; align-items:center; gap:6px;
    font-weight:700; font-size:12px;
  }
  .dot { width:8px; height:8px; border-radius:50%; }
  .dot.green { background:var(--green); }
  .dot.red { background:var(--red); }
  .dot.yellow { background:#f59e0b; }

  /* RECENT ACTIVITY */
  .activity-list { }
  .activity-item {
    display:flex; align-items:center; gap:14px;
    padding:12px 0;
    border-bottom:1px solid rgba(120,80,255,0.08);
  }
  .activity-item:last-child { border-bottom:none; }
  .activity-icon {
    width:36px; height:36px; border-radius:10px;
    display:flex; align-items:center; justify-content:center;
    font-size:16px; flex-shrink:0;
  }
  .activity-icon.buy { background:rgba(34,197,94,0.15); }
  .activity-icon.sell { background:rgba(239,68,68,0.15); }
  .activity-info { flex:1; }
  .activity-title { font-size:13px; font-weight:700; }
  .activity-time { font-size:11px; color:var(--muted); margin-top:2px; }
  .activity-amount { font-size:13px; font-weight:700; }
  .activity-amount.profit { color:var(--green); }
  .activity-amount.loss { color:var(--red); }

  /* MOBILE */
  .hamburger-btn {
    display:none; background:none; border:none;
    color:var(--text); font-size:20px; cursor:pointer;
  }
  @media(max-width:768px) {
    .sidebar { transform:translateX(-100%); transition:transform 0.3s; }
    .sidebar.open { transform:translateX(0); }
    .main { margin-left:0; padding:16px; }
    .grid-2 { grid-template-columns:1fr; }
    .hamburger-btn { display:block; }
    .stats-grid { grid-template-columns:1fr 1fr; }
  }

  /* Animations */
  @keyframes fadeUp {
    from { opacity:0; transform:translateY(16px); }
    to { opacity:1; transform:translateY(0); }
  }
  .stat-card, .card { animation: fadeUp 0.4s ease both; }
</style>
</head>
<body>

<!-- SIDEBAR -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-logo">XYPHOR</div>
  <div class="nav-item active" onclick="setPage(this)"><span>üìä</span> Overview</div>
  <div class="nav-item" onclick="setPage(this)"><span>üìà</span> My Challenge</div>
  <div class="nav-item" onclick="setPage(this)"><span>üí∞</span> Payouts</div>
  <div class="nav-item" onclick="setPage(this)"><span>üìã</span> Trade History</div>
  <div class="nav-item" onclick="setPage(this)"><span>‚öôÔ∏è</span> Settings</div>
  <div class="nav-item" onclick="setPage(this)"><span>üéØ</span> Rules</div>

  <div class="sidebar-bottom">
    <div class="user-info">
      <div class="user-avatar">R</div>
      <div>
        <div class="user-name">Rajeet</div>
        <div class="user-email"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="cebabcafaaabbc8eb6b7bea6a1bce0ada1a3">[email&#160;protected]</a></div>
      </div>
    </div>
    <button class="logout-btn" onclick="window.location.href='auth.html'">üö™ Logout</button>
  </div>
</div>

<!-- MAIN -->
<div class="main">
  <!-- TOP BAR -->
  <div class="topbar">
    <div style="display:flex;align-items:center;gap:12px;">
      <button class="hamburger-btn" onclick="toggleSidebar()">‚ò∞</button>
      <div class="page-title">Dashboard</div>
    </div>
    <div class="topbar-right">
      <div class="badge-live">‚óè LIVE</div>
      <button class="payout-btn" onclick="showPayout()">üí∏ Request Payout</button>
    </div>
  </div>

  <!-- STATS -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-label">Account Balance</div>
      <div class="stat-value purple">$25,000</div>
      <div class="stat-change up">‚ñ≤ Starting Balance</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Current Profit</div>
      <div class="stat-value green">+$843.50</div>
      <div class="stat-change up">‚ñ≤ +3.37% of target</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Daily Loss</div>
      <div class="stat-value" style="color:#f59e0b;">-$120.00</div>
      <div class="stat-change">Limit: $750</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Trading Days</div>
      <div class="stat-value lime">3 / 7</div>
      <div class="stat-change">4 more days needed</div>
    </div>
  </div>

  <!-- MIDDLE GRID -->
  <div class="grid-2">
    <!-- CHALLENGE PROGRESS -->
    <div class="card">
      <div class="section-title">Challenge Progress</div>
      <div class="progress-item">
        <div class="progress-header">
          <span class="progress-label">Profit Target (5%)</span>
          <span class="progress-val lime">3.37% / 5%</span>
        </div>
        <div class="progress-bar"><div class="progress-fill fill-lime" style="width:67%"></div></div>
      </div>
      <div class="progress-item">
        <div class="progress-header">
          <span class="progress-label">Max Daily Loss (3%)</span>
          <span class="progress-val green">0.48% used</span>
        </div>
        <div class="progress-bar"><div class="progress-fill fill-green" style="width:16%"></div></div>
      </div>
      <div class="progress-item">
        <div class="progress-header">
          <span class="progress-label">Max Total Loss (6%)</span>
          <span class="progress-val green">0% used</span>
        </div>
        <div class="progress-bar"><div class="progress-fill fill-purple" style="width:0%"></div></div>
      </div>
      <div class="progress-item">
        <div class="progress-header">
          <span class="progress-label">Min Trading Days</span>
          <span class="progress-val" style="color:#f59e0b;">3 / 7 days</span>
        </div>
        <div class="progress-bar"><div class="progress-fill fill-lime" style="width:43%"></div></div>
      </div>
    </div>

    <!-- RULES STATUS -->
    <div class="card">
      <div class="section-title">Rules Status</div>
      <div class="rules-table">
        <div class="rule-row">
          <span class="rule-name">Profit Target</span>
          <div class="rule-status"><div class="dot yellow"></div> In Progress</div>
        </div>
        <div class="rule-row">
          <span class="rule-name">Daily Loss Limit</span>
          <div class="rule-status"><div class="dot green"></div> Passing</div>
        </div>
        <div class="rule-row">
          <span class="rule-name">Max Drawdown</span>
          <div class="rule-status"><div class="dot green"></div> Passing</div>
        </div>
        <div class="rule-row">
          <span class="rule-name">Min Trading Days</span>
          <div class="rule-status"><div class="dot yellow"></div> 4 Days Left</div>
        </div>
        <div class="rule-row">
          <span class="rule-name">Consistency Rule</span>
          <div class="rule-status"><div class="dot green"></div> Passing</div>
        </div>
        <div class="rule-row">
          <span class="rule-name">Max Leverage</span>
          <div class="rule-status"><div class="dot green"></div> Within Limit</div>
        </div>
      </div>
    </div>
  </div>

  <!-- RECENT TRADES -->
  <div class="card">
    <div class="section-title">Recent Trades</div>
    <div class="activity-list">
      <div class="activity-item">
        <div class="activity-icon buy">üìà</div>
        <div class="activity-info">
          <div class="activity-title">XAUUSD ‚Äî BUY</div>
          <div class="activity-time">Today, 10:32 AM ‚Ä¢ 0.5 lot</div>
        </div>
        <div class="activity-amount profit">+$312.50</div>
      </div>
      <div class="activity-item">
        <div class="activity-icon buy">üìà</div>
        <div class="activity-info">
          <div class="activity-title">EURUSD ‚Äî BUY</div>
          <div class="activity-time">Today, 09:15 AM ‚Ä¢ 1.0 lot</div>
        </div>
        <div class="activity-amount profit">+$650.00</div>
      </div>
      <div class="activity-item">
        <div class="activity-icon sell">üìâ</div>
        <div class="activity-info">
          <div class="activity-title">GBPUSD ‚Äî SELL</div>
          <div class="activity-time">Yesterday, 03:45 PM ‚Ä¢ 0.3 lot</div>
        </div>
        <div class="activity-amount loss">-$119.00</div>
      </div>
      <div class="activity-item">
        <div class="activity-icon buy">üìà</div>
        <div class="activity-info">
          <div class="activity-title">USDJPY ‚Äî BUY</div>
          <div class="activity-time">Yesterday, 11:20 AM ‚Ä¢ 0.5 lot</div>
        </div>
        <div class="activity-amount profit">+$87.50</div>
      </div>
      <div class="activity-item">
        <div class="activity-icon sell">üìâ</div>
        <div class="activity-info">
          <div class="activity-title">XAUUSD ‚Äî SELL</div>
          <div class="activity-time">2 days ago, 02:10 PM ‚Ä¢ 0.2 lot</div>
        </div>
        <div class="activity-amount loss">-$87.50</div>
      </div>
    </div>
  </div>
</div>

<!-- PAYOUT MODAL -->
<div id="payoutModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.7); z-index:999; display:none; align-items:center; justify-content:center;">
  <div style="background:var(--card); border:1px solid var(--border); border-radius:16px; padding:32px; max-width:400px; width:90%; animation:fadeUp 0.3s ease;">
    <h3 style="font-family:'Orbitron',sans-serif; font-size:16px; margin-bottom:20px;">üí∏ Request Payout</h3>
    <div style="margin-bottom:16px;">
      <div style="font-size:11px; color:var(--muted); letter-spacing:1px; text-transform:uppercase; margin-bottom:8px;">Available Profit</div>
      <div style="font-family:'Orbitron',sans-serif; font-size:28px; color:var(--green);">+$843.50</div>
    </div>
    <div style="margin-bottom:16px;">
      <div style="font-size:11px; color:var(--muted); letter-spacing:1px; text-transform:uppercase; margin-bottom:8px;">Your Share (80%)</div>
      <div style="font-family:'Orbitron',sans-serif; font-size:22px; color:var(--lime);">$674.80</div>
    </div>
    <div style="margin-bottom:20px;">
      <label style="font-size:11px; color:var(--muted); text-transform:uppercase; letter-spacing:1px; display:block; margin-bottom:8px;">Wallet Address</label>
      <input type="text" placeholder="Enter crypto wallet address" style="width:100%; padding:12px; background:rgba(255,255,255,0.04); border:1px solid var(--border); border-radius:8px; color:var(--text); font-family:'Syne',sans-serif; font-size:13px; outline:none;">
    </div>
    <div style="display:flex; gap:10px;">
      <button onclick="closePayout()" style="flex:1; padding:12px; background:transparent; border:1px solid var(--border); border-radius:8px; color:var(--muted); font-family:'Syne',sans-serif; cursor:pointer;">Cancel</button>
      <button style="flex:1; padding:12px; background:linear-gradient(135deg,var(--accent),var(--accent2)); border:none; border-radius:8px; color:#fff; font-family:'Syne',sans-serif; font-weight:700; cursor:pointer;">Submit Request</button>
    </div>
  </div>
</div>

<script>
  // Auth check
  window.onload = function() {
    const token = localStorage.getItem('xyphor_token');
    const user = JSON.parse(localStorage.getItem('xyphor_user') || '{}');
    if(!token) { window.location.href = 'auth.html'; return; }
    const name = (user.user_metadata && user.user_metadata.full_name) || user.email || 'Trader';
    document.querySelector('.user-avatar').textContent = name.charAt(0).toUpperCase();
    document.querySelector('.user-name').textContent = name;
    document.querySelector('.user-email').textContent = user.email || '';
  }
  function setPage(el) {
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    el.classList.add('active');
  }
  function toggleSidebar() {
    document.getElementById('sidebar').classList.toggle('open'